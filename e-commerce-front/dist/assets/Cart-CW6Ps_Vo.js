import{j as s,f as l,r as p,y as x,z as h,d as j,A as g,B as y,L as C}from"./index-BQzuh-gl.js";import{H as f,L}from"./Loading-C7GyUsR3.js";import{C as b}from"./CartItem-BrsBYg-r.js";import"./Spinner-jn7EIcrl.js";import"./Button-fxhDizMt.js";import"./Button-DL7ha1n5.js";import"./Form-d93rxYQ-.js";import"./warning-DLf8qE4y.js";const v=({products:r,changeQuantity:e,removeProduct:o})=>{const n=r.map(a=>s.jsx(b,{...a,changeQuantity:e,removeProduct:o},a.id));return s.jsx("div",{children:n})},E="_container_1el08_1",F={container:E},I=({total:r})=>s.jsxs("div",{className:F.container,children:[s.jsx("span",{children:"SubTotal:"}),s.jsx("span",{children:r})]}),Q=()=>{const r=l();p.useEffect(()=>{const t=r(x());return()=>{t.abort(),r(h())}},[r]);const{error:e,loading:o,productFullinfo:n,items:a}=j(t=>t.cart),c=n.map(t=>({...t,quantity:a[t.id],total:a[t.id]*t.price})),d=p.useCallback((t,i)=>{r(g({id:t,quantity:i}))},[r]),u=p.useCallback(t=>{r(y({id:t}))},[r]),m=c.map(t=>t.total).reduce((t,i)=>t+i,0);return{products:c,total:m,removeProduct:u,changedQuantity:d,error:e,loading:o}},z=()=>{const{products:r,total:e,removeProduct:o,changedQuantity:n,error:a,loading:c}=Q();return s.jsxs(s.Fragment,{children:[s.jsx(f,{title:"Cart"}),s.jsx(L,{loading:c,error:a,type:"cart",children:r.length>0?s.jsxs(s.Fragment,{children:[s.jsx(v,{products:r,changeQuantity:n,removeProduct:o}),s.jsx(I,{total:e})]}):s.jsx(C,{styled:"",type:"empty",message:"Your Cart is Empty"})})]})};export{z as default};
