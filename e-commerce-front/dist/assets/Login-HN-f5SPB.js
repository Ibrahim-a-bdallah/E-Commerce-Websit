import{r as u,u as x,j as s,c as b,f as E,d as R,q as H,e as I,s as L,t as $,v as D}from"./index-BQzuh-gl.js";import{z as j,u as q,I as A,s as z}from"./input-BmnTGpF_.js";import{R as B,C as O,S as P}from"./Spinner-jn7EIcrl.js";import{m as T,A as U,i as V,F as N,j as W,C as G}from"./CloseButton-TJC02nm-.js";import{F as J}from"./Form-d93rxYQ-.js";import"./Button-DL7ha1n5.js";import"./warning-DLf8qE4y.js";const w=T("h4");w.displayName="DivStyledAsH4";const S=u.forwardRef(({className:a,bsPrefix:e,as:r=w,...t},n)=>(e=x(e,"alert-heading"),s.jsx(r,{ref:n,className:b(a,e),...t})));S.displayName="AlertHeading";const y=u.forwardRef(({className:a,bsPrefix:e,as:r=U,...t},n)=>(e=x(e,"alert-link"),s.jsx(r,{ref:n,className:b(a,e),...t})));y.displayName="AlertLink";const C=u.forwardRef((a,e)=>{const{bsPrefix:r,show:t=!0,closeLabel:n="Close alert",closeVariant:p,className:c,children:f,variant:o="primary",onClose:d,dismissible:l,transition:m=N,...i}=V(a,{show:"onClose"}),g=x(r,"alert"),k=W(F=>{d&&d(!1,F)}),h=m===!0?N:m,v=s.jsxs("div",{role:"alert",...h?void 0:i,ref:e,className:b(c,g,o&&`${g}-${o}`,l&&`${g}-dismissible`),children:[l&&s.jsx(G,{onClick:k,"aria-label":n,variant:p}),f]});return h?s.jsx(h,{unmountOnExit:!0,...i,ref:void 0,in:t,children:v}):t?v:null});C.displayName="Alert";const K=Object.assign(C,{Link:y,Heading:S}),M=j.object({email:j.string().email(),password:j.string().min(1,{message:"Password is required"})}),as=()=>{var l,m;const a=E(),{loading:e,error:r,accessToken:t}=R(i=>i.auth),[n]=H(),p=I(),{register:c,handleSubmit:f,formState:{errors:o}}=q({mode:"all",resolver:z(M)}),d=async i=>{a(D(i)).unwrap().then(()=>p("/"))};return u.useEffect(()=>()=>{a(L())},[a]),t?s.jsx($,{to:"/"}):s.jsx(s.Fragment,{children:s.jsx(B,{children:s.jsxs(O,{md:{span:6,offset:3},children:[n.get("message")?s.jsx(K,{variant:"success",children:n.get("message")}):"",s.jsxs(J,{onSubmit:f(d),children:[s.jsx(A,{label:"Email",register:c,name:"email",error:(l=o.email)==null?void 0:l.message}),s.jsx(A,{label:"Password",type:"password",register:c,name:"password",error:(m=o.password)==null?void 0:m.message}),s.jsx("button",{type:"submit",className:"btn btn-primary",children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(P,{animation:"border",size:"sm"})," loading"]}):"Submit"}),r&&s.jsx("div",{className:"alert alert-danger mt-2",role:"alert",children:r})]})]})})})};export{as as default};
